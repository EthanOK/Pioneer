
>- 原文链接：https://finematics.com/eip-4844-explained/
>- 译者：[AI翻译官](https://learnblockchain.cn/people/19584)
>- 本文永久链接：[learnblockchain.cn/article…](https://learnblockchain.cn/article/8006)
    
### 介绍


[EIP-4844 解释 - youtube ](https://youtu.be/HT9PHWloIiU)

以太坊的扩展一直是一个备受争议的话题。 Layer 2 解决方案一直处于这场战斗的前沿，提供了一种处理主链之外的交易的方式，以缓解拥塞并降低费用。但是有一个问题。 即使 L2 也面临限制，这些限制妨碍了它们的效率和可扩展性。 EIP-4844 是增加 L2 潜力并使以太坊与其扩展路线图保持一致的下一步。  

那么，EIP-4844 到底是什么？它如何帮助扩展 L2？它解锁了哪些新的可能性？它真的可以将 L2 上的交易费用降低超过 90% 吗？你将在本文中找到这些问题的答案以及更多内容。

### 什么是 EIP-4844 和 Proto-danksharding？

作为提醒，EIP 代表以太坊改进提案，这是开发人员可以建议对以太坊协议进行更改的过程。具体而言，EIP-4844 提出了一种新类型的交易，可以显著增强以太坊上处理和处理数据的方式。

你可能也听说过“proto-danksharding”，现在它与 EIP-4844 互换使用。 

![](https://img.learnblockchain.cn/pics/20240425153912.png)

Proto-danksharding 是完整 danksharding 的初始实现。它为将来的 danksharding 扩展奠定了基础。通过实现构成完整 danksharding 规范的大部分逻辑和“脚手架”，而不实现实际数据分片，可以更轻松地进行过渡，并且可以在多次网络升级中进行，而不会在一个升级中对以太坊引入太多风险。 

EIP-4844 的核心思想是支持以太坊的“rollup 中心化”未来。 Rollups 是处理主要以太坊链之外交易的 Layer 2 解决方案，但继承了以太坊的安全性。 EIP-4844 的目标是通过引入一种新类型的交易，使 rollups 更便宜和更高效，从而使它们的运营成本降低一个数量级。 

这反过来将使建立在 rollups 之上的应用程序使用起来更便宜，并增加整个以太坊生态系统的采用率。 

想象在 rollups 中进行 DEX 交换。如果目前执行此类操作的成本为，假设为，1 美元，那么在 EIP-4844 后很可能会降低到约 0.10 美元。尽管在此示例中的影响有一些注意事项，我们将在视频中稍后介绍。 

EIP-4844 与其他几个 EIP 一起将包含在即将到来的 Dencun 网络升级中。
> 备注： Dencun 网络已经升级

现在，让我们更仔细地看看 EIP-4844 是如何工作的。

### 技术细节 

EIP-4844 引入了一种新类型的交易类型到以太坊，该类型接受要在信标节点中保存一段时间的“blob”数据。这些更改与以太坊的扩展路线图兼容，而且 blob 足够小，以保持磁盘使用可管理。Blob 交易的格式与最终 danksharding 规范中预期的格式相同。 

这伴随着一个“blob 费用市场”，确保“blob” 空间被有效使用并保持经济可行。通过引入 blob gas 作为一种新类型的 gas 来实现这一点。它独立于正常 gas。目前，只有 blobs 的价格是以 blob gas 计价的。 

![](https://img.learnblockchain.cn/attachments/migrate/1714030480508)

Blob 是 4096 个 32 字节的字段元素。每个 blob 每个块的上限由 MAX\_BLOBS\_PER\_BLOCK 参数控制。上限可以从低开始，并在多次网络升级中增长。最初，Dencun 的目标是每个块 6 个 blobs。4096 \* 32 字节 \* 6 每个块 = 每个块 0.75 MB。

Blob 存储在信标节点（共识层）中，而不是执行层中。未来的分片工作只需要对信标节点进行更改，从而使执行层能够同时处理其他倡议。

Blob 是短暂的，并在大约 2 周后被修剪。它们的可用时间足够长，以便 rollup 的所有参与者都可以检索它，但又足够短，以保持磁盘使用可管理。这使得 blobs 的价格比 CALLDATA 更便宜，后者是永久存储在历史记录中的数据。 

EIP-4844 的加密基础是 KZG 承诺。不深入细节，它们允许有效且安全地包含数据，这对于 blob 交易的功能至关重要。这样，执行层中只需解释对“blob”的承诺，而不是“blob”本身。 

为了生成 KZG 承诺的共享密钥，进行了一个基于浏览器的广泛分布的仪式，以确保所有以太坊网络参与者都有机会确保它被正确和安全地生成。 

EIP-4844 添加了一个称为点评估的新预编译，用于验证 KZG 证明，该证明声称 blob（由承诺表示）在给定点处评估为给定值。 

那么这一切如何应用于 rollups 呢？ 

有了新的 blob 空间，rollups 将能够将其块数据放入 blobs 而不是迄今为止用于此目的的更昂贵的 CALLDATA。 

在共识层中利用短暂的 blob 空间是可能的，因为 rollups 只需要确保诚实的参与者可以构建 rollup 空间的数据足够长时间。 

对于像 Optimism 或 Arbitrum 这样的乐观 rollups，他们只需要在欺诈挑战窗口打开时提供基础数据。欺诈证明可以验证过渡的较小步骤，通过 CALLDATA 最多一次加载几个 blob 的值。 

![](https://img.learnblockchain.cn/attachments/migrate/1714030480509)

ZK rollups 将为其交易或状态增量数据提供两个承诺：blob 承诺和 ZK rollup 自己的承诺，使用 rollup 内部使用的任何证明系统。他们还将使用等价性协议的证明，使用先前提到的点评估预编译，以证明这两个承诺指的是相同的数据。 

### 影响 

EIP-4844 对以太坊生态系统的影响不可低估。首先，它显著提高了 Layer 2 解决方案的可扩展性，降低了它们的运营成本，并使它们更具竞争力，与其他便宜的替代区块链相比。降低运营成本的可能性是因为目前 rollups 所产生的绝大部分一件事是肯定的，即使主要结果是交易吞吐量的增加，交易成本保持不变，EIP-4844 为未来更大规模的可扩展性奠定了基础，最终将导致用户获得更便宜的交易。

### 摘要

令人兴奋的是，以太坊社区已经在各种测试网络上完成了对 EIP-4844 的测试，预计主网将于 3 月 13 日启动。这是实现以太坊无与伦比的可扩展性的一个重要步骤。

![](https://img.learnblockchain.cn/attachments/migrate/1714030480510)

我们已经看到大多数主要的 L2 承诺在 Dencun 升级发生后立即开始使用新的“blob”空间。

总之，EIP-4844 不仅仅是一个升级。这是以太坊在成为更具可扩展性、高效和用户友好的区块链过程中的一个关键时刻。通过降低成本并提高Layer2解决方案的效率，以太坊将巩固其作为去中心化应用领先平台的地位。

如果你喜欢阅读本文，请查看 Finematics 的 [Youtube](https://www.youtube.com/c/finematics) 和[Twitter](https://twitter.com/finematics)。

> 本文由 AI 翻译，欢迎小伙伴们来[校对](https://github.com/lbc-team/Pioneer/blob/master/translations/8006.md)。